<html>

<head>
<title>Du Bois Gallery</title>

<!-- Connects to the slim version of JQuery through their CDN -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>

<!-- Connects to the CSS of Bootstrap through cdnjs -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<!-- Connects to the CSS -->
<link rel="stylesheet" href="www/styles.css">

<!-- JS script that connects slider input
position to the width of the foreground image -->
<script>
$(document).ready(function(){
  // .on("input change") responds to changes on the input while dragging the mouse
  // .change() only triggers once the mouse stops being dragged
  $("#slider").on("input change", (e)=>{
    const sliderPos = e.target.value;
    // Update the width of the foreground image
    $('.foreground-img').css('width', `${sliderPos}%`);
    // Update the position of the slider button
    $('#slider-button').css('left', `calc(${sliderPos}% - 18px)`);
  });
});
</script>

<!-- JS script that connects clicking on the gallery menu
to which images are shown in the container -->
<script>
$(document).ready(function(){
  // Empty object of names for the original images
  const origimages = {
    y22wk09:'',
    y22wk10:'',
    y23wk02:'',
    y23wk03:'',
    y23wk04:'',
    y23wk05:'',
    y23wk06:''
  };
  
  // Object of urls of the original images
  for(let item of Object.keys(origimages)) {
    origimages[item] = 'www/dubois/' + item + '.jpg'
  };
  
  // Empty object of names for the new images
  const newimages = {
    y22wk09:'',
    y22wk10:'',
    y23wk02:'',
    y23wk03:'',
    y23wk04:'',
    y23wk05:'',
    y23wk06:''
  };
  
  // Object of urls of the new images
  for(let item of Object.keys(newimages)) {
    newimages[item] = 'www/new/' + item + '.png'
  };
  
  // Gets the id's of the clicked object and uses it to search through
  // the arrays and defines the urls of the new background images
  $('#over-gallery').click(function(e) {
    const idimage = e.target.id;
    
    // Guarantees that the change only happens if an object that has an id is clicked
    if (idimage.length != 0) {
      $('.background-img').css('background-image', `url(${newimages[idimage]})`);
      $('.foreground-img').css('background-image', `url(${origimages[idimage]})`);
      
      // Scrolls until the top of the container is atop the page
      document.querySelector("#container").scrollIntoView({behavior: "smooth"});
    }
  });
});
</script>

<!-- JS script that binds original and new plots
to make the tooltips -->
<script>
$(document).ready(function(){
  // Array of image id's
  const imageids = ["y22wk09", "y22wk10", "y23wk02", "y23wk03", "y23wk04", "y23wk05", "y23wk06"];
  
  // Empty object of names for the original images
  const origimages = {
    y22wk09:'',
    y22wk10:'',
    y23wk02:'',
    y23wk03:'',
    y23wk04:'',
    y23wk05:'',
    y23wk06:''
  };
  
  // Object of urls of the original images
  for(let item of Object.keys(origimages)) {
    origimages[item] = 'www/dubois/thumb_' + item + '.jpg'
  };
  
  // Iterates along the id's and adds the original images as tooltips
  for (let i = 0; i < imageids.length; i++) {
    const el = "#" + imageids[i];
    $(el).tooltip({
        animated: "fade",
        placement: "left",
        html: true,
        title: $("<div>").html("<img src='"+origimages[imageids[i]]+"' width='100%'>")
      })
  }
});
</script>

<!-- Establishes triggers to show and hide info with a slide animation.
Also changes the svg text that is visible inside the button -->
<script>
$(document).ready(function(){
  $("#plus").click(function() {
    $("#info").slideDown("slow");
    $("#plus").fadeToggle({duration: 200, queue: false});
    $("#minus").fadeToggle({duration: 200, queue: false});
  });
  $("#minus").click(function() {
    $("#info").slideUp("slow");
    $("#minus").fadeToggle({duration: 200, queue: false});
    $("#plus").fadeToggle({duration: 200, queue: false});
  });
});
</script>

<!-- Binds clicking on the up and down buttons to
scrolling behaviour inside the gallery menu -->
<script>
$(document).ready(function(){
  $("svg.up").click(function() {
    document.querySelector("#gallery").scrollBy({
      top: -200,
      left: 0,
      behavior: "smooth",
    });
  });
  $("svg.down").click(function() {
    document.querySelector("#gallery").scrollBy({
      top: 200,
      left: 0,
      behavior: "smooth",
    });
  });
});
</script>

<!-- Binds hover effects to each svg circle -->
<script>
$(document).ready(function(){
  $(".canvas-circle").mouseenter(function() {
    $( this ).find("circle").css("stroke", "hsl(38deg 26% 18%)");
  });
  $(".canvas-circle").mouseleave(function() {
    $( this ).find("circle").css("stroke", "transparent");
  });
});
</script>

</head>

<body>

<!-- Title section with info on the project -->
<div id='title-section'>
    <div id='title'>
      WEBDUBOIS: VISUALIZING RACIAL INEQUALITY AND BLACK ACHIEVEMENTS IN BRAZIL
      <div id='subtitle'>
        <a href='https://twitter.com/icarobsc' target='_blank'>
          <span class='glyphs' id='twt'></span> @IcaroBSC
        </a>
        <a href='https://github.com/IcaroBernardes' target='_blank'>
          <span class='glyphs' id='ghb'></span> @IcaroBernardes
        </a>
        <a href='https://www.linkedin.com/in/icarobsc/' target='_blank'>
          <span class='glyphs' id='lkd'></span> @icarobsc
        </a>
        <div id='more'>
          <svg viewBox="0 0 30 30" class='canvas-circle'>
            <circle></circle>
            <text x="7" y="27" id='plus'>+</text>
            <text x="9" y="27" id='minus'>-</text>
          </svg>
          <div>MORE INFO:</div>
        </div>
      </div>
    </div>
    
    <div id='info'><div>
      <span>
        <a href='https://en.wikipedia.org/wiki/W._E._B._Du_Bois' target='_blank'>W.E.B. Du Bois</a> (February 23, 1868 â€“ August 27, 1963) was an American sociologist, socialist, historian and Pan-Africanist civil rights activist <span style='font-style:italic;'>(Source: Wikipedia)</span>.
        <br><br>
        In the 1900 Paris Exposition his team made a historical display. They presented in many charts the situation of Black people in Georgia and the US in general. The timelessness of these posters provoked <a href='https://twitter.com/ajstarks' target='_blank'>Anthony Starks</a>, <a href='https://twitter.com/AlDatavizguy' target='_blank'>Allen Hillery</a>, <a href='https://twitter.com/sqlsekou' target='_blank'>Sekou Tyler</a> and <a href='https://twitter.com/menscuriosa' target='_blank'>Chimdi Nwosu</a> to create and mantain the <a href='https://github.com/ajstarks/dubois-data-portraits/tree/master/challenge' target='_blank'>#DuBoisChallenge</a>. The proposal was to reproduce Du Bois posters with any tools whatsoever. I chose to make these charts in <code>R</code> using <code>ggplot</code> and many extensions. Furthermore, I used this opportunity to present data on racial inequality and Black achievements in my homeland, Brazil.
      </span>
      <img src='www/portrait.jpg' id='portrait'>
    </div></div>
</div>

<!-- Container that shows the images -->
<div id='over-container'>
<div id='container'>
    <div class='img background-img'></div>
    <div class='img foreground-img'></div>
    <input type="range" min="1" max="100" value="50" class="slider" name='slider' id="slider">
    <div id='slider-button'></div>
</div>
</div>

<!-- Gallery menu -->
<div id='over-gallery'>
  <div class='up'><svg viewBox="0 0 30 30" class='canvas-circle up'>
    <circle></circle>
    <text x="-22" y="24">></text>
  </svg></div>
  
  <div id='gallery'>
    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y22wk09.png' class='item' id='y22wk09'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y22wk10.png' class='item' id='y22wk10'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y23wk02.png' class='item' id='y23wk02'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y23wk03.png' class='item' id='y23wk03'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y23wk04.png' class='item' id='y23wk04'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y23wk05.png' class='item' id='y23wk05'>

    <svg class='tip-bg'><rect></svg>
    <img src='www/new/thumb_y23wk06.png' class='item' id='y23wk06'>
  </div>
  
  <div class='down'><svg viewBox="0 0 30 30" class='canvas-circle down'>
    <circle></circle>
    <text x="10" y="-5">></text>
  </svg></div>
  
</div>

<!-- Connects to a bundle of Bootstrap and Popper through cdnjs -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

</body>
</html>
